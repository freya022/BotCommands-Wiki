
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://freya022.github.io/BotCommands/3.0.0-alpha.9/using-botcommands/dependency-injection/">
      
      
        <link rel="prev" href="../../setup/logging/">
      
      
        <link rel="next" href="../database/">
      
      
      <link rel="icon" href="../../assets/logo-round.svg">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.14">
    
    
      
        <title>Dependency injection - BotCommands Wiki</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.fad675c6.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="purple" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#dependency-injection" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="BotCommands Wiki" class="md-header__button md-logo" aria-label="BotCommands Wiki" data-md-component="logo">
      
  <img src="../../assets/logo-transparent.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            BotCommands Wiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Dependency injection
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="purple" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="purple" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/freya022/BotCommands/tree/3.X" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    BotCommands
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../setup/getting-started/" class="md-tabs__link">
          
  
  Setup

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  Using BotCommands

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../using-commands/common-command-details/" class="md-tabs__link">
          
  
  Using commands

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="BotCommands Wiki" class="md-nav__button md-logo" aria-label="BotCommands Wiki" data-md-component="logo">
      
  <img src="../../assets/logo-transparent.svg" alt="logo">

    </a>
    BotCommands Wiki
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/freya022/BotCommands/tree/3.X" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    BotCommands
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Setup
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Setup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Using BotCommands
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Using BotCommands
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Dependency injection
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Dependency injection
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#creating-services" class="md-nav__link">
    <span class="md-ellipsis">
      Creating services
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating services">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#service-factories" class="md-nav__link">
    <span class="md-ellipsis">
      Service factories
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conditional-services" class="md-nav__link">
    <span class="md-ellipsis">
      Conditional services
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Conditional services">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interfaced-conditions" class="md-nav__link">
    <span class="md-ellipsis">
      Interfaced conditions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annotation-conditions" class="md-nav__link">
    <span class="md-ellipsis">
      Annotation conditions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interfaced-services" class="md-nav__link">
    <span class="md-ellipsis">
      Interfaced services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-properties" class="md-nav__link">
    <span class="md-ellipsis">
      Service properties
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Service properties">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#service-names" class="md-nav__link">
    <span class="md-ellipsis">
      Service names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-types" class="md-nav__link">
    <span class="md-ellipsis">
      Service types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-priority" class="md-nav__link">
    <span class="md-ellipsis">
      Service priority
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#retrieving-services" class="md-nav__link">
    <span class="md-ellipsis">
      Retrieving services
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Retrieving services">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#primary-providers" class="md-nav__link">
    <span class="md-ellipsis">
      Primary providers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interfaced-services_1" class="md-nav__link">
    <span class="md-ellipsis">
      Interfaced services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lazy-services" class="md-nav__link">
    <span class="md-ellipsis">
      Lazy services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-services" class="md-nav__link">
    <span class="md-ellipsis">
      Optional services
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../database/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Database
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Using commands
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Using commands
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using-commands/common-command-details/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Common details
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Slash commands
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Slash commands
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using-commands/application-commands/writing-slash-commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating slash commands
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/freya022/BotCommands/edit/3.X/wiki/docs/using-botcommands/dependency-injection.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


<h1 id="dependency-injection">Dependency injection<a class="headerlink" href="#dependency-injection" title="Permanent link">&para;</a></h1>
<p>Dependency injection provided by this framework is a more lightweight alternative to dedicated frameworks, 
quite similarly to <a href="https://docs.spring.io/spring-framework/reference/core/beans/dependencies/factory-collaborators.html">Spring</a> or <a href="https://www.baeldung.com/java-ee-cdi">CDI using Weld</a>.</p>
<p>Rather than you having to construct objects, you may only request them, 
the framework will then construct it by providing the dependencies required for your service, wherever they may come from.</p>
<p>This avoids having to pass objects everywhere, allowing a more effective decoupling, 
and allows switching implementations in a completely transparent manner.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p><code>ConnectionSupplier</code> is an interfaced service (an interface that, when implemented, enables the service to be retrieved as such interface).</p>
<p>You can create an implementation of this interface, per database, enabling you to switch your database, 
for example, using a configuration file, without changing anything else in your code.</p>
</div>
<details class="info">
<summary>2.X Migration</summary>
<p>All singletons / classes with static methods were moved as services, including:</p>
<ul>
<li><code>Components</code></li>
<li><code>EventWaiter</code></li>
<li><code>Localization</code></li>
</ul>
<p>If you were using <code>ExtensionsBuilder#registerConstructorParameter(Class&lt;T&gt;, ConstructorParameterSupplier&lt;T&gt;)</code> to get objects in commands, 
it is basically the same, except in a much more complete framework, and without having to declare everything with this method.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">2.X</label><label for="__tabbed_1_2">3.X</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Java</label><label for="__tabbed_2_2">Kotlin</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">TagDatabase.java</span><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TagDatabase</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* */</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<div class="highlight"><span class="filename">TagCommand.java</span><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TagCommand</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">TagDatabase</span><span class="w"> </span><span class="n">tagDatabase</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">TagCommand</span><span class="p">(</span><span class="n">TagDatabase</span><span class="w"> </span><span class="n">tagDatabase</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">tagDatabase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tagDatabase</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><span class="filename">Builder</span><pre><span></span><code><span class="kd">final</span><span class="w"> </span><span class="kd">var</span><span class="w"> </span><span class="n">tagDatabase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">TagDatabase</span><span class="p">(</span><span class="cm">/* */</span><span class="p">);</span>

<span class="n">CommandsBuilder</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">registerConstructorParameter</span><span class="p">(</span><span class="n">TagDatabase</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">clazz</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">tagDatabase</span><span class="p">)</span>
<span class="w">    </span><span class="c1">// Further configuration</span>
<span class="w">    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">TagDatabase.kt</span><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">TagDatabase</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* */</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<div class="highlight"><span class="filename">TagCommand.kt</span><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">TagCommand</span><span class="p">(</span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">tagDatabase</span><span class="p">:</span><span class="w"> </span><span class="n">TagDatabase</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cm">/* */</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><span class="filename">Builder</span><pre><span></span><code><span class="kd">val</span><span class="w"> </span><span class="nv">tagDatabase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TagDatabase</span><span class="p">(</span><span class="cm">/* */</span><span class="p">);</span>

<span class="n">CommandsBuilder</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">registerConstructorParameter</span><span class="p">(</span><span class="n">TagDatabase</span><span class="o">::</span><span class="n">class</span><span class="p">.</span><span class="na">java</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">tagDatabase</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// Further configuration</span>
<span class="w">    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</code></pre></div>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Java</label><label for="__tabbed_3_2">Kotlin</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">TagDatabase.java</span><pre><span></span><code><span class="nd">@BService</span><span class="w"> </span><span class="c1">//Makes this class injectable, can also pull other services in its constructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TagDatabase</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* */</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<div class="highlight"><span class="filename">TagCommand.java</span><pre><span></span><code><span class="nd">@Command</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TagCommand</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">TagDatabase</span><span class="w"> </span><span class="n">tagDatabase</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">TagCommand</span><span class="p">(</span><span class="n">TagDatabase</span><span class="w"> </span><span class="n">tagDatabase</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">tagDatabase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tagDatabase</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/* */</span>
<span class="p">}</span>
</code></pre></div>
<p>No specific builder code required!</p>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">TagDatabase.kt</span><pre><span></span><code><span class="nd">@BService</span><span class="w"> </span><span class="c1">//Makes this class injectable, can also pull other services in its constructor</span>
<span class="kd">class</span><span class="w"> </span><span class="nc">TagDatabase</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* */</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<div class="highlight"><span class="filename">TagCommand.kt</span><pre><span></span><code><span class="nd">@Command</span>
<span class="kd">class</span><span class="w"> </span><span class="nc">TagCommand</span><span class="p">(</span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">tagDatabase</span><span class="p">:</span><span class="w"> </span><span class="n">TagDatabase</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cm">/* */</span>
<span class="p">}</span>
</code></pre></div>
<p>No specific builder code required!</p>
</div>
</div>
</div>
</div>
</div>
</div>
</details>
<h2 id="creating-services">Creating services<a class="headerlink" href="#creating-services" title="Permanent link">&para;</a></h2>
<p>To register a class as a service, add <code class="highlight"><span class="nd">@BService</span></code> to your class declaration.</p>
<p><code class="highlight"><span class="nd">@BService</span></code> is the base annotation to register a service, 
other annotations exist such as <code class="highlight"><span class="nd">@Command</span></code> and <code class="highlight"><span class="nd">@Resolver</span></code>, 
but the appropriate documentation will specify if such alternatives are required.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>All classes available for dependency injection must be in the framework's classpath,
by adding packages to <code>BBuilder#packages</code>, or by using <code>BBuilder#addSearchPath</code>, 
all classes are searched recursively.</p>
</div>
<h3 id="service-factories">Service factories<a class="headerlink" href="#service-factories" title="Permanent link">&para;</a></h3>
<p>Service factories are methods that create initialized services themselves,
they accept other services as parameters and define a service with the method's return type.</p>
<p>In addition to the package requirement,
they must be annotated with <code class="highlight"><span class="nd">@BService</span></code>, be in a service, or in an <code class="highlight"><span class="kd">object</span></code>, or be a static method.</p>
<div class="admonition note">
<p class="admonition-title">Terminology</p>
<p>Classes registered as services, and service factories, are service providers.</p>
</div>
<details class="example">
<summary>Example</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="4:3"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><input id="__tabbed_4_3" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Java</label><label for="__tabbed_4_2">Kotlin</label><label for="__tabbed_4_3">Kotlin property</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Config</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Config</span><span class="w"> </span><span class="n">INSTANCE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/* */</span>

<span class="w">    </span><span class="c1">// Service factory, registers as &quot;Config&quot; (as it is the return type)</span>
<span class="w">    </span><span class="nd">@BService</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Config</span><span class="w"> </span><span class="nf">getInstance</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">INSTANCE</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Of course here you would load the config from a file</span>
<span class="w">            </span><span class="n">INSTANCE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Config</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">INSTANCE</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">Config</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cm">/* */</span>

<span class="w">    </span><span class="kd">companion</span><span class="w"> </span><span class="kd">object</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="c1">// Service factory, registers as &quot;Config&quot; (as it is the return type)</span>
<span class="w">        </span><span class="c1">// You can use any method name</span>
<span class="w">        </span><span class="kd">fun</span><span class="w"> </span><span class="nf">createConfig</span><span class="p">():</span><span class="w"> </span><span class="n">Config</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Of course here you would load the config from a file</span>
<span class="w">            </span><span class="n">Config</span><span class="p">()</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">Config</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cm">/* */</span>

<span class="w">    </span><span class="kd">companion</span><span class="w"> </span><span class="kd">object</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="c1">// Service factory, registers as &quot;Config&quot; (as it is the return type)</span>
<span class="w">        </span><span class="nd">@get</span><span class="p">:</span><span class="n">BService</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">instance</span><span class="p">:</span><span class="w"> </span><span class="n">Config</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">lazy</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Of course here you would load the config from a file</span>
<span class="w">            </span><span class="n">Config</span><span class="p">()</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<h3 id="conditional-services">Conditional services<a class="headerlink" href="#conditional-services" title="Permanent link">&para;</a></h3>
<p>Some services may not always be instantiable, 
some may require soft dependencies (prevents instantiation if a service is unavailable, without failing),
while some run a set of conditions to determine if a service can be instantiated.</p>
<p>Services that are not instantiable will not be created at startup, 
will be unavailable for injection and do not figure in the list of interfaced services.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>All the following annotations must be used alongside a service-declaring annotation, 
such as <code class="highlight"><span class="nd">@BService</span></code> or <code class="highlight"><span class="nd">@Command</span></code>.</p>
</div>
<h4 id="dependencies">Dependencies<a class="headerlink" href="#dependencies" title="Permanent link">&para;</a></h4>
<p>The <code class="highlight"><span class="nd">@Dependencies</span></code> annotation lets you define soft dependencies,
that is, if any of these classes in the annotation are unavailable, your service will not be instantiated.</p>
<p>Without the annotation, any unavailable dependency would throw an exception.</p>
<h4 id="interfaced-conditions">Interfaced conditions<a class="headerlink" href="#interfaced-conditions" title="Permanent link">&para;</a></h4>
<p><code class="highlight"><span class="nd">@ConditionalService</span></code> defines a list of classes implementing <code>ConditionalServiceChecker</code>,
the service is only created if none of these classes return an error message.</p>
<p><code>ConditionalServiceChecker</code> can be implemented on any class that has a no-arg constructor, or is an <code class="highlight"><span class="kd">object</span></code>.</p>
<details class="example">
<summary>Example</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Java</label><label for="__tabbed_5_2">Kotlin</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nd">@Command</span>
<span class="nd">@ConditionalService</span><span class="p">(</span><span class="n">TagCommand</span><span class="p">.</span><span class="na">FeatureCheck</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"> </span><span class="c1">// Only create the command if this passes</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TagCommand</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cm">/* */</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FeatureCheck</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ConditionalServiceChecker</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nd">@Nullable</span>
<span class="w">        </span><span class="nd">@Override</span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">checkServiceAvailability</span><span class="p">(</span><span class="nd">@NotNull</span><span class="w"> </span><span class="n">BContext</span><span class="w"> </span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="nd">@NotNull</span><span class="w"> </span><span class="n">Class</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">checkedClass</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">final</span><span class="w"> </span><span class="kd">var</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="na">getService</span><span class="p">(</span><span class="n">Config</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w"> </span><span class="c1">// Suppose this is your configuration</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">config</span><span class="p">.</span><span class="na">areTagsEnabled</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Tags are disabled in the configuration&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Do not allow the tag command!</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span><span class="w"> </span><span class="c1">// No error message, allow the tag command!</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nd">@Command</span>
<span class="nd">@ConditionalService</span><span class="p">(</span><span class="n">TagCommand</span><span class="p">.</span><span class="na">FeatureCheck</span><span class="o">::</span><span class="n">class</span><span class="p">)</span><span class="w"> </span><span class="c1">// Only create the command if this passes</span>
<span class="kd">class</span><span class="w"> </span><span class="nc">TagCommand</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cm">/* */</span>

<span class="w">    </span><span class="kd">object</span><span class="w"> </span><span class="nc">FeatureCheck</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ConditionalServiceChecker</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">checkServiceAvailability</span><span class="p">(</span><span class="n">context</span><span class="p">:</span><span class="w"> </span><span class="n">BContext</span><span class="p">,</span><span class="w"> </span><span class="n">checkedClass</span><span class="p">:</span><span class="w"> </span><span class="n">Class</span><span class="o">&lt;*&gt;</span><span class="p">):</span><span class="w"> </span><span class="kt">String?</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">val</span><span class="w"> </span><span class="nv">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="na">getService</span><span class="o">&lt;</span><span class="n">Config</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="c1">// Suppose this is your configuration</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">config</span><span class="p">.</span><span class="na">enableTags</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Tags are disabled in the configuration&quot;</span><span class="w"> </span><span class="c1">// Do not allow the tag command!</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="c1">// No error message, allow the tag command!</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<h4 id="annotation-conditions">Annotation conditions<a class="headerlink" href="#annotation-conditions" title="Permanent link">&para;</a></h4>
<p><code class="highlight"><span class="nd">@Condition</span></code> is a <em>meta-annotation</em> (an annotation for annotations) which marks your own annotation as being a condition.</p>
<p>Similar to interfaced conditions, they must refer to an implementation of <code>CustomConditionChecker</code>, 
to determine if the annotated service can be created, 
you can also indicate if the service creation must throw an exception in case it fails.</p>
<p>The implementation must have a no-arg constructor, or be an <code class="highlight"><span class="kd">object</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The annotation must also be in the framework's classpath.</p>
</div>
<details class="example">
<summary>Example</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Java</label><label for="__tabbed_6_2">Kotlin</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">DevCommand.java</span><pre><span></span><code><span class="c1">// Same targets as service annotations</span>
<span class="nd">@Target</span><span class="p">({</span><span class="n">ElementType</span><span class="p">.</span><span class="na">TYPE</span><span class="p">,</span><span class="w"> </span><span class="n">ElementType</span><span class="p">.</span><span class="na">METHOD</span><span class="p">})</span>
<span class="c1">// The implementation of our CustomConditionChecker</span>
<span class="nd">@Condition</span><span class="p">(</span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DevCommandChecker</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="nd">@interface</span><span class="w"> </span><span class="n">DevCommand</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<div class="highlight"><span class="filename">DevCommandChecker.java</span><pre><span></span><code><span class="c1">// Checks services annotated with @DevCommand</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DevCommandChecker</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">CustomConditionChecker</span><span class="o">&lt;</span><span class="n">DevCommand</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@NotNull</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Class</span><span class="o">&lt;</span><span class="n">DevCommand</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getAnnotationType</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">DevCommand</span><span class="p">.</span><span class="na">class</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Nullable</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">checkServiceAvailability</span><span class="p">(</span><span class="nd">@NotNull</span><span class="w"> </span><span class="n">BContext</span><span class="w"> </span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="nd">@NotNull</span><span class="w"> </span><span class="n">Class</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">checkedClass</span><span class="p">,</span><span class="w"> </span><span class="nd">@NotNull</span><span class="w"> </span><span class="n">DevCommand</span><span class="w"> </span><span class="n">annotation</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="kd">var</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="na">getService</span><span class="p">(</span><span class="n">Config</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w"> </span><span class="c1">// Suppose this is your configuration</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">config</span><span class="p">.</span><span class="na">isDevModeEnabled</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Dev mode is disable in the configuration&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Do not allow the dev commands!</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span><span class="w"> </span><span class="c1">// No error message, allow the tag command!</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><span class="filename">SlashShutdown.java</span><pre><span></span><code><span class="nd">@Command</span>
<span class="nd">@DevCommand</span><span class="w"> </span><span class="c1">// Our custom condition, this command will only exist if it passes.</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SlashShutdown</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cm">/* */</span>
<span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">DevCommand.kt</span><pre><span></span><code><span class="c1">// Same targets as service annotations</span>
<span class="nd">@Target</span><span class="p">(</span><span class="n">AnnotationTarget</span><span class="p">.</span><span class="na">CLASS</span><span class="p">,</span><span class="w"> </span><span class="n">AnnotationTarget</span><span class="p">.</span><span class="na">FUNCTION</span><span class="p">,</span><span class="w"> </span><span class="n">AnnotationTarget</span><span class="p">.</span><span class="na">PROPERTY_GETTER</span><span class="p">)</span>
<span class="c1">// The implementation of our CustomConditionChecker</span>
<span class="nd">@Condition</span><span class="p">(</span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DevCommandChecker</span><span class="o">::</span><span class="n">class</span><span class="p">)</span>
<span class="kd">annotation</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">DevCommand</span>

<span class="c1">// Checks services annotated with @DevCommand</span>
<span class="kd">object</span><span class="w"> </span><span class="nc">DevCommandChecker</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">CustomConditionChecker</span><span class="o">&lt;</span><span class="n">DevCommand</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">annotationType</span><span class="p">:</span><span class="w"> </span><span class="n">Class</span><span class="o">&lt;</span><span class="n">DevCommand</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DevCommand</span><span class="o">::</span><span class="n">class</span><span class="p">.</span><span class="na">java</span>

<span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">checkServiceAvailability</span><span class="p">(</span><span class="n">context</span><span class="p">:</span><span class="w"> </span><span class="n">BContext</span><span class="p">,</span><span class="w"> </span><span class="n">checkedClass</span><span class="p">:</span><span class="w"> </span><span class="n">Class</span><span class="o">&lt;*&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">annotation</span><span class="p">:</span><span class="w"> </span><span class="n">DevCommand</span><span class="p">):</span><span class="w"> </span><span class="kt">String?</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="na">getService</span><span class="o">&lt;</span><span class="n">Config</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="c1">// Suppose this is your configuration</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">config</span><span class="p">.</span><span class="na">enableDevMode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Dev mode is disable in the configuration&quot;</span><span class="w"> </span><span class="c1">// Do not allow the dev commands!</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="c1">// No error message, allow the tag command!</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><span class="filename">SlashShutdown.kt</span><pre><span></span><code><span class="nd">@Command</span>
<span class="nd">@DevCommand</span><span class="w"> </span><span class="c1">// Our custom condition, this command will only exist if it passes.</span>
<span class="kd">class</span><span class="w"> </span><span class="nc">SlashShutdown</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cm">/* */</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<h3 id="interfaced-services">Interfaced services<a class="headerlink" href="#interfaced-services" title="Permanent link">&para;</a></h3>
<p>Interfaced services are interfaces, or abstract class, marked by <code class="highlight"><span class="nd">@InterfacedService</span></code>,
they must be implemented by a service.</p>
<p>In addition to the service's type,
implementations of these annotated interfaces have the interface's type automatically added.</p>
<p>Some interfaced services may only be implemented once, some may allow multiple implementations,
if an interfaced service only accepts one implementation, multiple implementations can exist,
but only one must be instantiable.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can implement multiple interfaced services at once, 
which may be useful for text, application and component filters.</p>
</div>
<details class="info">
<summary>2.X Migration</summary>
<p>Most methods in <code>CommandsBuilder</code> accepting interfaces, implementations or lambdas, were moved to interfaced services:</p>
<p><strong>Global:</strong></p>
<ul>
<li><code>CommandsBuilder#setComponentManager</code>: Removed, using components must be enabled in <code>BComponentsConfigBuilder#useComponents</code>, and a <code>ConnectionSupplier</code> service be present</li>
<li><code>CommandsBuilder#setSettingsProvider</code>: Needs to implement <code>SettingsProvider</code></li>
<li><code>CommandsBuilder#setUncaughtExceptionHandler</code>: Needs to implement <code>GlobalExceptionHandler</code></li>
<li><code>CommandsBuilder#setDefaultEmbedFunction</code>: Needs to implement <code>DefaultEmbedSupplier</code> and <code>DefaultEmbedFooterIconSupplier</code></li>
</ul>
<p><strong>Text commands:</strong></p>
<ul>
<li><code>TextCommandBuilder#addTextFilter</code>: Needs to implement <code>TextCommandFilter</code>, and <code>TextCommandRejectionHandler</code></li>
<li><code>TextCommandBuilder#setHelpBuilderConsumer</code>: Needs to implement <code>HelpBuilderConsumer</code></li>
</ul>
<p><strong>Application commands:</strong></p>
<ul>
<li><code>ApplicationCommandBuilder#addApplicationFilter</code>: Needs to implement <code>ApplicationCommandFilter</code>, and <code>ApplicationCommandRejectionHandler</code></li>
<li><code>ApplicationCommandBuilder#addComponentFilter</code>: Needs to implement <code>ComponentCommandFilter</code>, and <code>ComponentCommandRejectionHandler</code></li>
</ul>
<p><strong>Extensions:</strong></p>
<ul>
<li><code>ExtensionsBuilder#registerAutocompletionTransformer</code>: Needs to implement <code>AutocompleteTransformer</code></li>
<li><code>ExtensionsBuilder#registerCommandDependency</code>: Replaced with standard dependency injection</li>
<li><code>ExtensionsBuilder#registerConstructorParameter</code>: Replaced with standard dependency injection</li>
<li><code>ExtensionsBuilder#registerCustomResolver</code>: Needs to implement <code>ClassParameterResolver</code> and <code>ICustomResolver</code></li>
<li><code>ExtensionsBuilder#registerDynamicInstanceSupplier</code>: Needs to implement <code>DynamicSupplier</code></li>
<li><code>ExtensionsBuilder#registerInstanceSupplier</code>: Replaced by service factories</li>
<li><code>ExtensionsBuilder#registerParameterResolver</code>: Needs to implement <code>ClassParameterResolver</code> and the resolver interface of your choices</li>
</ul>
</details>
<h3 id="service-properties">Service properties<a class="headerlink" href="#service-properties" title="Permanent link">&para;</a></h3>
<p>Service providers can have names, additional registered types, and an instantiation priority.</p>
<h4 id="service-names">Service names<a class="headerlink" href="#service-names" title="Permanent link">&para;</a></h4>
<p>Named services may be useful if you have multiple services of the same type, but need to get a specific one.</p>
<p>The name is either defined by using <code class="highlight"><span class="nd">@ServiceName</span></code>, or with <code>BService#name</code> on the service provider.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>You can have a caching <code>HttpClient</code> named <code>cachingHttpClient</code>, while the usual client uses the default name.</p>
</div>
<h4 id="service-types">Service types<a class="headerlink" href="#service-types" title="Permanent link">&para;</a></h4>
<p>In addition to the type of the service provider, 
<code class="highlight"><span class="nd">@ServiceType</span></code> enables you to register a service as a supertype.</p>
<h4 id="service-priority">Service priority<a class="headerlink" href="#service-priority" title="Permanent link">&para;</a></h4>
<p>Service priorities control how service providers are sorted.</p>
<p>A higher priority means that the service will be loaded first,
or that an interfaced service will appear first when <a href="#interfaced-services-1">requesting interfaced services</a>.</p>
<p>The priority is either defined by using <code class="highlight"><span class="nd">@ServicePriority</span></code>, or with <code>BService#priority</code> on the service provider, 
see their documentation to learn what how service providers are sorted.</p>
<h2 id="retrieving-services">Retrieving services<a class="headerlink" href="#retrieving-services" title="Permanent link">&para;</a></h2>
<p>Any class given by a service provider can be injected into other service providers, 
requesting a service is as simple as declaring a parameter in the class's constructor, 
or the service factory's parameters.</p>
<p>Named services can be retrieved by using <code class="highlight"><span class="nd">@ServiceName</span></code> on the parameter.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can also get services manually with <code>BContext</code> or <code>ServiceContainer</code>, the latter has all methods available, 
including Kotlin extensions.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">Java</label><label for="__tabbed_7_2">Kotlin</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nd">@BService</span><span class="w"> </span><span class="c1">// Enables the service to request services and be requested</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TagDatabase</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* */</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@Command</span><span class="w"> </span><span class="c1">// Enables the command to request services and be requested</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TagCommand</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Component</span><span class="w"> </span><span class="n">components</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">TagDatabase</span><span class="w"> </span><span class="n">tagDatabase</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">TagCommand</span><span class="p">(</span>
<span class="w">        </span><span class="c1">// You can even request framework services, as long as they are annotated with @BService or @InterfacedService</span>
<span class="w">        </span><span class="n">Component</span><span class="w"> </span><span class="n">components</span><span class="p">,</span>
<span class="w">        </span><span class="c1">// and your own services</span>
<span class="w">        </span><span class="n">TagDatabase</span><span class="w"> </span><span class="n">tagDatabase</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">components</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">components</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">tagDatabase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tagDatabase</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cm">/* */</span>
<span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nd">@BService</span><span class="w"> </span><span class="c1">// Enables the service to request services and be requested</span>
<span class="kd">class</span><span class="w"> </span><span class="nc">TagDatabase</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* */</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@Command</span><span class="w"> </span><span class="c1">// Enables the command to request services and be requested</span>
<span class="kd">class</span><span class="w"> </span><span class="nc">TagCommand</span><span class="p">(</span>
<span class="w">    </span><span class="c1">// You can even request framework services, as long as they are annotated with @BService or @InterfacedService</span>
<span class="w">    </span><span class="c1">// Here I&#39;ve named it &quot;componentsService&quot; because &quot;components&quot; might conflict with some JDA-KTX builders</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">componentsService</span><span class="p">:</span><span class="w"> </span><span class="n">Components</span><span class="p">,</span>
<span class="w">    </span><span class="c1">// and your own services</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">tagDatabase</span><span class="p">:</span><span class="w"> </span><span class="n">TagDatabase</span>
<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cm">/* */</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
</div>
</div>
<h3 id="primary-providers">Primary providers<a class="headerlink" href="#primary-providers" title="Permanent link">&para;</a></h3>
<p>When requesting a service of a specific type, there must be at most one service provider for such a type.</p>
<p>If multiple <strong>usable</strong> providers for the same type are present,
no service can be returned unless <em>one</em> primary provider is defined.</p>
<p>For example, if you have two <a href="#service-factories">service factories</a> with the same return type:</p>
<ul>
<li><img alt="" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/274c.svg" title=":x:" /> If both are usable</li>
<li><img alt="" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/2705.svg" title=":white_check_mark:" /> One has a failing condition, meaning you have one usable provider</li>
<li><img alt="" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/2705.svg" title=":white_check_mark:" /> One is annotated with <code class="highlight"><span class="nd">@Primary</span></code>, in which case this one is prioritized</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can still retrieve existing services with <code>ServiceContainer#getInterfacedServices/getInterfacedServiceTypes</code></p>
</div>
<h3 id="interfaced-services_1">Interfaced services<a class="headerlink" href="#interfaced-services_1" title="Permanent link">&para;</a></h3>
<p>A list which the element type is an interfaced service can be requested,
the list will then contain all instantiable instances with the specified type.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p><code class="highlight"><span class="n">List</span><span class="o">&lt;</span><span class="n">ApplicationCommandFilter</span><span class="o">&lt;?&gt;&gt;</span></code> will contain all instances implementing <code>ApplicationCommandFilter</code>, 
which are usable.</p>
</div>
<h3 id="lazy-services">Lazy services<a class="headerlink" href="#lazy-services" title="Permanent link">&para;</a></h3>
<p>Lazy service retrieval enables you to get lazily-created service, delaying the initialization,
or to get services that are not yet available, such as manually injected services (like <code>JDA</code>).</p>
<div class="admonition example">
<p class="admonition-title">Retrieving a lazy service</p>
<div class="tabbed-set tabbed-alternate" data-tabs="8:2"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">Java</label><label for="__tabbed_8_2">Kotlin</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Request a <code>Lazy</code> with the element type being the requested service, 
and then get the service when needed by using <code>Lazy#getValue</code>.</p>
</div>
<div class="tabbed-block">
<p>Request a <code>ServiceContainer</code> and use a delegated property, such as:</p>
<p><code class="highlight"><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">helpCommand</span><span class="p">:</span><span class="w"> </span><span class="n">IHelpCommand</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">serviceContainer</span><span class="p">.</span><span class="na">lazy</span><span class="p">()</span></code></p>
</div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Lazy injections cannot contain a list of interfaced services, 
nor can a list of lazy services be requested.</p>
</div>
<h3 id="optional-services">Optional services<a class="headerlink" href="#optional-services" title="Permanent link">&para;</a></h3>
<p>When a requested service is not available, and is not a <a href="#dependencies">soft-dependency</a>, 
service creation will fail.</p>
<p>In case your service does not always require the service,
you can prevent failure by using Kotlin's <a href="https://kotlinlang.org/docs/null-safety.html">nullable</a> / <a href="https://kotlinlang.org/docs/functions.html#default-arguments">optional</a> parameters,
but Java users will need a runtime-retained <code class="highlight"><span class="nd">@Nullable</span></code> annotation 
(such as <code class="highlight"><span class="nd">@javax.annotation.Nullable</span></code>, or, in checker-framework or JSpecify) or <code class="highlight"><span class="nd">@Optional</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Lazy nullability</p>
<p>Lazy services can also have their element type be marked as nullable, 
for example, <code class="highlight"><span class="n">Lazy</span><span class="o">&lt;</span><span class="nd">@Nullable</span><span class="w"> </span><span class="n">IHelpCommand</span><span class="o">&gt;</span></code>.</p>
</div>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/freya022/BotCommands/tree/3.X" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/freya022/BotCommands/tree/3.X/wiki" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96zm0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://discord.gg/frpCcQfvTz" target="_blank" rel="noopener" title="discord.gg" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tabs", "toc.integrate", "content.code.annotate", "content.code.copy", "content.action.edit", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.cd18aaf1.min.js"></script>
      
    
  </body>
</html>